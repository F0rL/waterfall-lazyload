# 瀑布流布局和懒加载

预览地址：https://f0rl.github.io/waterfall-lazyload.html
### 懒加载原理
设置一个隐藏元素，只有当滑动到此元素可见时，才加载后续资源。
可以减轻服务器的压力，而且可以让加载好的页面更快地呈现在用户面前（用户体验好）。

### 瀑布流原理
- 单个元素的宽度要一致
- 计算每行摆放的元素数量
- 每加载一个元素，放在高度最小的元素下面
- 父容器高度取列表数组的最大值

### 模块流程
1. 先执行主流程 `start()` 。
2. 通过 `getData()` 获取数据并生成节点，使用 `isDataArrive` 标记数据是否获取到。
2. 通过`getNode()`将拿到的数据进行 `DOM` 拼接，并执行瀑布流 `waterFallPlace()`。
3. 检测窗口滚动的时候，如果数据已经是获取过，则跳过；否则只要 `#load` 标记元素(已隐藏在 DOM节点 中)进入视野( 即 `懒加载` )，再次执行 `start()`。
4. 瀑布流 `waterFallPlace()` 的最后必须将容器的高度设为最高列的高度，即父容器高度取列表数组的最大值。否则布局会塌陷。

